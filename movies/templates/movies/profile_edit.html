{% extends 'base.html' %}
{% load static %}

{% block content %}
<div class="profile-container">
    <div class="profile-box">
        <h2>{{ user.username }}님의 프로필 수정</h2>

        <!-- 현재 프로필 이미지 표시 -->
        <div class="current-profile-image">
            <p><strong>현재 프로필 사진:</strong></p>
            {% if user.profile_image %}
                <img src="{{ user.profile_image.url }}" alt="현재 프로필 사진" class="profile-image">
            {% else %}
                <img src="{% static 'movies/default.png' %}" alt="기본 프로필 사진" class="profile-image">
            {% endif %}
        </div>

        <!-- 프로필 수정 폼 -->
        <form method="POST" enctype="multipart/form-data">
            {% csrf_token %}
            
            <!-- 닉네임 수정 -->
            <div class="form-group">
                <label for="nickname">닉네임 수정:</label>
                <input type="text" id="nickname" name="nickname" value="{{ user.nickname }}" required>
            </div>

            <!-- 프로필 이미지 수정 -->
            <div class="form-group">
                <label for="profile_image">새 프로필 사진 수정:</label>
                <input type="file" id="profile_image" name="profile_image">
            </div>

            <!-- 비밀번호 변경 옵션 (kakao_로 시작되는 사용자 제외) -->
            {% if not is_kakao_user %}
            <div class="form-group">
                <label for="password">비밀번호 변경:</label>
                <input type="password" id="password" name="password" placeholder="새 비밀번호">
            </div>
            <div class="form-group">
                <label for="password_confirm">비밀번호 확인:</label>
                <input type="password" id="password_confirm" name="password_confirm" placeholder="비밀번호 확인">
            </div>
            {% endif %}
            
            <button type="submit" class="btn btn-primary">수정하기</button>
        </form>
    </div>
</div>
{% endblock %}
